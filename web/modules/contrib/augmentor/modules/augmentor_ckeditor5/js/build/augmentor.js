!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.augmentor=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/utils.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/utils.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";r.d(o,{default:()=>a});var e=r("ckeditor5/src/core.js"),t=r("ckeditor5/src/ui.js");var s=r("ckeditor5/src/utils.js");class n extends e.Command{constructor(e,t){super(e),this._config=t}execute(e={}){const t=this.editor,r=t.model.document.selection,o=r.getLastPosition(),s=r.getRanges();let n="";for(let e of s)for(let t of e.getItems())void 0!==t.data&&(n=n+t.data+" ");var i={input:n,augmentor:e,type:"ckeditor"};t.model.change((e=>{fetch(drupalSettings.path.baseUrl+"augmentor/execute/augmentor",{method:"POST",credentials:"same-origin",body:JSON.stringify(i)}).then((e=>{if(jQuery(".ajax-progress--fullscreen").remove(),e.ok)return e.json();this._showError(e.json())})).then((e=>{(e=JSON.parse(e)).default?this._updateCkeditor(e,o):this._showError(e.error||"Other Augmentor error")})).catch((e=>{this._showError(e.toString())}))}))}_updateCkeditor(e,t){e=(e="<br/>"+e.default.toString()).replaceAll("\n","<br/>");const r=this.editor,o=r.data.processor.toView(e),s=r.data.toModel(o);r.model.insertContent(s,t)}_showError(e){const t=new Drupal.Message;t.clear(),t.add(e,{type:"error"}),jQuery("html, body").animate({scrollTop:0},"slow")}}class i extends e.Plugin{init(){const e=this.editor,r=this.editor.config.get("augmentors")[0].augmentors;e.commands.add("executeCommand",new n(e,r)),e.ui.componentFactory.add("augmentor",(e=>{const o=new s.Collection;Object.keys(r).forEach((e=>{o.add({type:"button",model:new t.ViewModel({id:e,label:r[e],withText:!0,command:"executeCommand"})})}));const n=(0,t.createDropdown)(e,t.DropdownButtonView);return(0,t.addListToDropdown)(n,o),n.buttonView.set({label:"Augmentors",class:"augmentor-dropdown",icon:'<?xml version="1.0" standalone="no"?>\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"\r\n "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">\r\n<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\r\n width="16.000000pt" height="16.000000pt" viewBox="0 0 16.000000 16.000000"\r\n preserveAspectRatio="xMidYMid meet">\r\n\r\n<g transform="translate(0.000000,16.000000) scale(0.100000,-0.100000)"\r\nfill="#000000" stroke="none">\r\n<path d="M25 135 c-50 -49 -15 -135 55 -135 41 0 80 39 80 80 0 41 -39 80 -80\r\n80 -19 0 -40 -9 -55 -25z m97 -12 c38 -34 11 -103 -40 -103 -54 0 -81 62 -45\r\n102 20 22 61 23 85 1z"/>\r\n<path d="M50 105 c-26 -32 13 -81 48 -59 9 6 18 19 20 28 8 38 -43 61 -68 31z\r\nm46 -16 c10 -17 -13 -36 -27 -22 -12 12 -4 33 11 33 5 0 12 -5 16 -11z"/>\r\n</g>\r\n</svg>\r\n',tooltip:!0,withText:!0}),this.listenTo(n,"execute",(e=>{var t=this.editor.sourceElement.id;jQuery("#"+t).before(Drupal.theme.ajaxProgressIndicatorFullscreen()),this.editor.execute(e.source.command,e.source.id)})),n}))}}class d extends e.Plugin{static get requires(){return[i,t.ContextualBalloon]}}const a={augmentor:d}})(),o=o.default})()));