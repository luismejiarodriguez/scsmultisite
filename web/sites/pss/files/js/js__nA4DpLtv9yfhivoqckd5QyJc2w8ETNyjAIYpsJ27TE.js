/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(Drupal){'use strict';Drupal.behaviors.pss={attach:function(context,settings){}};})(Drupal);;
(function($,drupalSettings){setTimeout(()=>{$.ajax({type:'POST',cache:false,url:drupalSettings.statistics.url,data:drupalSettings.statistics.data});});})(jQuery,drupalSettings);;
(function($,Drupal,drupalSettings){'use strict';Drupal.behaviors.views_bulk_operations={attach:function(context,settings){once('vbo-init','.vbo-view-form',context).forEach(Drupal.viewsBulkOperationsFrontUi);}};let viewsBulkOperationsSelection=class{constructor(vbo_form){this.vbo_form=vbo_form;this.$actionSelect=$('select[name="action"]',vbo_form);this.view_id='';this.display_id='';this.$summary=null;this.totalCount=0;this.ajaxing=false;}bindEventHandlers($element,element_type,index=0){if($element.length){var selectionObject=this;$element.on('keypress',function(event){if(event.which===13){event.preventDefault();event.stopPropagation();selectionObject.update(this,element_type,index);$(this).trigger('click');}if(event.which===32)selectionObject.update(this,element_type,index);});$element.on('click',function(event){if(event.which===1)selectionObject.update(this,element_type,index);});}}bindActionSelect(){if(this.$actionSelect.length){var selectionObject=this;this.$actionSelect.on('change',function(event){selectionObject.toggleButtonsState();});}}bindCheckboxes(){var selectionObject=this;var checkboxes=$('.js-vbo-checkbox',this.vbo_form);checkboxes.on('change',function(event){selectionObject.toggleButtonsState();});}toggleButtonsState(){var buttons=$('input[data-vbo="vbo-action"], button[data-vbo="vbo-action"]',this.vbo_form);var anyItemsSelected;if(this.view_id.length&&this.display_id.length)anyItemsSelected=this.totalCount;else anyItemsSelected=$('.js-vbo-checkbox:checked',this.vbo_form).length;if(this.$actionSelect.length){let has_selection=anyItemsSelected&&this.$actionSelect.val()!=='';buttons.prop('disabled',!has_selection);}else buttons.prop('disabled',!anyItemsSelected);}update(element,element_type,index){if(!this.view_id.length||!this.display_id.length){this.toggleButtonsState();return;}if(this.ajaxing)return;var list={};var selectionObject=this;var op='update';if(element_type==='selection_method_change')op=element.checked?'method_exclude':'method_include';else{$('.js-vbo-checkbox',this.vbo_form).each(function(){let dom_value=$(this).val();if(dom_value.length<10)return;list[dom_value]=this.checked;});if(element_type==='table_select_all')this.list[index].forEach(function(bulk_form_key){list[bulk_form_key]=element.checked;});}var $summary=this.$summary;var $selectionInfo=this.$selectionInfo;var target_uri=drupalSettings.path.baseUrl+drupalSettings.path.pathPrefix+'views-bulk-operations/ajax/'+this.view_id+'/'+this.display_id;var ajax_options={url:target_uri,progress:false,submit:{list,op},success:function(data){selectionObject.totalCount=data.count;$selectionInfo.html(data.selection_info);$summary.text(Drupal.formatPlural(data.count,'Selected 1 item','Selected @count items'));selectionObject.toggleButtonsState();selectionObject.ajaxing=false;}};if(Object.prototype.hasOwnProperty.call(drupalSettings,'vbo')&&Object.prototype.hasOwnProperty.call(drupalSettings.vbo,'ajax_loader')&&drupalSettings.vbo.ajax_loader)ajax_options.progress={type:'fullscreen'};var ajaxDrupal=Drupal.ajax(ajax_options);this.ajaxing=true;ajaxDrupal.execute();}};Drupal.viewsBulkOperationsFrontUi=function(element){var $vboForm=$(element);var $viewsTables=$('.vbo-table',$vboForm);var $primarySelectAll=$('.vbo-select-all',$vboForm);var tableSelectAll=[];let vboSelection=new viewsBulkOperationsSelection($vboForm);if($viewsTables.length)$viewsTables.each(function(index){tableSelectAll[index]=$(this).find('.select-all input').first();});var $multiSelectElement=$vboForm.find('.vbo-multipage-selector').first();if($multiSelectElement.length){vboSelection.$selectionInfo=$multiSelectElement.find('.vbo-info-list-wrapper').first();vboSelection.$summary=$multiSelectElement.find('summary').first();vboSelection.view_id=$multiSelectElement.attr('data-view-id');vboSelection.display_id=$multiSelectElement.attr('data-display-id');vboSelection.totalCount=drupalSettings.vbo_selected_count[vboSelection.view_id][vboSelection.display_id];vboSelection.list=[];var $contentWrappers;if($viewsTables.length)$contentWrappers=$viewsTables;else $contentWrappers=$([$vboForm]);$contentWrappers.each(function(index){vboSelection.list[index]=[];$(this).find('input[type="checkbox"]').each(function(){let value=$(this).val();if(!$(this).hasClass('vbo-select-all')&&value!=='on'){vboSelection.list[index].push(value);vboSelection.bindEventHandlers($(this),'vbo_checkbox');}});if($viewsTables.length&&tableSelectAll.length)vboSelection.bindEventHandlers(tableSelectAll[index],'table_select_all',index);});}else vboSelection.bindCheckboxes();if($primarySelectAll.length){$primarySelectAll.on('change',function(event){var value=this.checked;if(tableSelectAll.length)tableSelectAll.forEach(function(element){if(element.get(0).checked!==value)element.click();});$vboForm.find('.views-field-views-bulk-operations-bulk-form input[type="checkbox"]').each(function(){if(this.checked!==value)$(this).click();});$vboForm.find('.vbo-info-list-wrapper').each(function(){$(this).html('');});});if($multiSelectElement.length)vboSelection.bindEventHandlers($primarySelectAll,'selection_method_change');}vboSelection.bindActionSelect();vboSelection.toggleButtonsState();};})(jQuery,Drupal,drupalSettings);;
